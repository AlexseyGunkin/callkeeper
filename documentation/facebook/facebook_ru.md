# Настройка интеграции с Facebook LeadAds

## Навигация
* [Страница Facebook. Роли](#Страница-Facebook. Роли)
* [Форма Facebook](#Форма-Facebook)
* [Интеграция с CallKeeper](#Интеграция-с-CallKeeper)
* [Создание тестового лида в Facebook](#Создание-тестового-лида-в-Facebook)

Что необходимо для интеграции:

- Страница в Facebook.

- Настроенная форма LeadAds.

- Активный виджет в ЛК CallKeeper.  

Порядок действий для создания интеграции:

## Страница Facebook. Роли  

Откройте в Facebook страницу, для которой будете создавать формы.

Убедитесь, что у вас есть доступ уровня «Администратор» к нужной странице.

Это можно проверить в Разделе «Роли страницы»:

_Путь: /Настройки/Роли страницы_

Также убедитесь, что у вас есть доступ к рекламному аккаунту в Facebook. Уровень доступа определяет владелец рекламного аккаунта.

Если вы владелец рекламного аккаунта, вы можете выдавать доступ к своему рекламному аккаунту другим людям.
 
Для этого откройте страницу, для которой вы создаете форму. Перейдите в настройки и выберите Ads  Manager.

На открывшейся странице выберите свой рекламный аккаунт.

Далее откроется страница с информацией о кампаниях.


Нажмите на три полоски рядом с заголовком Ads  Manager  и в открывшемся выпадающем меню выберите «Настройки».

На открывшейся странице обратите внимание на раздел «Роли для рекламного аккаунта». Здесь указаны все аккаунты, которым выданы роли от имени вашего рекламного аккаунта.

Для корректной работы у аккаунта-администратора страницы должен быть доступ к рекламному аккаунту. Уровень доступа (Аналитик рекламного аккаунта/Рекламодатель рекламного аккаунта/Администратор рекламного аккаунта) вы выбираете сами.

Нажмите на кнопку «Добавить людей», чтобы выдать роли другим аккаунтам.

В поисковой строке введите имя нужного аккаунта (аккаунт должен быть у вас в друзьях), назначьте нужную роль и нажмите «Подтвердить».

Если ваш рекламный аккаунт привязан не к пользователю, а к компании, то доступ настраивается через Business  Manager:


Зайдите в рекламный аккаунт, нажмите на три полоски слева и выберите Настройки.

 
В открывшемся окне выберите Аккаунты/Рекламные аккаунты.

  

Уровень доступа к аккаунту зависит от того, какие права вы хотите выдать. Обратите внимание, что для корректной работы интеграции у аккаунта должен быть один из возможных уровней доступа.

  

## Форма Facebook

Откройте страницу, для которой вы настраиваете формы. У вашего рекламного аккаунта должен быть доступ к этой странице.

Перейдите во вкладку инструменты для публикации:

После этого перейдите во вкладку «Формы рекламы для лидов» — «Библиотека форм».

_Путь: /Инструменты для публикации/Формы рекламы для лидов._

Или по ссылке [facebook.com/ads/manage/powereditor/creation](https://www.facebook.com/adsmanager/creation/) — Кампания/Цель/Генерация лидов.

  
Создайте и настройте новую форму или скопируйте существующую:

Настройте новую форму, заполните необходимые поля, загрузите картинку.

В разделе «Вопросы» добавьте поля, которые будут отображаться в вашей форме. Обязательно добавьте поле для записи телефонного номера (Contact  fields/Phone  number).

  

  
Если необходимо добавить дополнительные вопросы, нажмите «Добавить новый вопрос» и выберете интересующие вас поля. Здесь же вы можете настроить выбор нескольких офисов, чтобы в последующем связать их настройками виджета в личном кабинете (Custom  Questions/Альтернативный вопрос).

  
Укажите и сохраните имя формы, которое также отразится в ЛК CallKeeper. Нажмите «Сохранить» и «Завершить».

## Интеграция с CallKeeper

Зайдите в ЛК CallKeeper. Во вкладке «Сервисы» выберите Facebook LeadAds.
  

В открывшейся вкладке нажмите «Подключить».

При подключении аккаунта в новом окне Facebook уточнит, под каким аккаунтом Facebook вы хотите залогиниться.

После этого откроется первое окно, на котором будут отображены все страницы Facebook, подключенные к аккаунту, под которым вы залогинились.

_Примечание: если вашим аккаунтом Facebook пользуются несколько аккаунтов CallKeeper, то на это этапе нужно **всегда** выбирать все страницы. Эта настройка влияет на всех пользователей, интегрированных с этим аккаунтом Facebook_.

На следующем шаге вам предложат выбрать действия, которые приложение CallKeeper сможет совершать со страницами, которые вы уже выбрали. Обе настройки рекомендуется сделать активными.

Если все выбрано правильно, то вы увидите следующее окно:  

После этого появится окно настроек страниц CallKeeper. Все страницы, выбранные в этом окне, будут привязаны к вашему аккаунту в CallKeeper.

Примечание: в этом окне вы можете выбрать либо те страницы, которые нужны вам, либо все страницы, которые вы указали в начале. Эта настройка никак не повлияет на других пользователей, интегрированных с этим же аккаунтом Facebook.

В личном кабинете CallKeeper нажмите «Добавить новую форму»  


Все созданные формы для выбранной страницы загрузятся в конструкторе, и вам останется выбрать соответствующий виджет, из которого берутся все настройки.

Далее обязательный выбор поля, где содержится номер клиента, и по желанию можно добавить произвольные значения UTM-меток и текст для проговаривания:

Настройки интеграции завершены. Для активации переведите форму сбора заявок на Facebook в активное состояние, передвинув левый ползунок в активное состояние:

Примечание: Мы добавили дополнительную проверку на доступ к аккаунту, странице и форме Facebook. Если у нашего приложения возникнут проблемы с доступом с любой их этих сущностей, вы увидите соответствующую маркировку рядом с ней: зеленая галочка – все в порядке, красный крестик – есть проблема с подключением.

Пример 1. Доступны все сущности – аккаунт, страница и форма.

Пример 2. Проблемы с доступом ко всем сущностям – аккаунту, странице и форме.

Если вы увидите крестик рядом с одной из сущностей, обратитесь к вашему менеджеру.

Проблема может заключаться в истекшем токене, отсутствии прав на одну из указанных сущностей или иной проблеме.

Попробуйте переподключить аккаунт, обратив внимание на поля, где вы выдаете доступ приложению CallKeeper к различным сущностям (выбор страницы, выбор форм).

## Создание тестового лида в Facebook

Вы можете проверить настройку своей интеграции, воспользовавшись инструментом для тестирования рекламы для лидов.


Авторизуйтесь в Facebook  и перейдите по ссылке: [https://developers.facebook.com/tools/lead-ads-testing/](https://developers.facebook.com/tools/lead-ads-testing/#_=_)

На этой странице вы можете отправить тестовые лиды на все созданные вами формы и страницы, закрепленные за активным аккаунтом Facebook.

  
Выберите нужную страницу и форму:

Вы можете отправить пустой лид, нажав на кнопку «Создать лид».

**В этом случае звонка по лиду не будет.**

Или откройте предпросмотр страницы, заполните данные и нажмите Submit, чтобы отправить заполненный лид.

**В этом случае по отправленному лиду произойдет звонок.**

Для каждой формы вы можете создать только один лид.

Чтобы создать новый, необходимо удалить старый.
